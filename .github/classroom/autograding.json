{
  "tests": [
    {
      "name": "Default &#47;app&#47; endpoint",
      "setup": "npm install",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*200\\s*(OK)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Nonexistent endpoint",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/nonexistent/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*404\\s*(Not Found)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Random coin flip endpoint &#38;&#35;47&#59;app&#38;&#35;47&#59;flip",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl http://localhost:${PORT}/app/flip/ && sleep 5s",
      "input": "",
      "output": "\\{\"flip\":\"(heads|tails)\"\\}",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Flip many coins endpoint &#47;app&#47;flips&#47;&#58;number&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; NUMBER=\"$(shuf -i 100-500 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl http://localhost:${PORT}/app/flips/${NUMBER}/ && sleep 5s",
      "input": "",
      "output": "\\{\"raw\":\\[\"(heads|tails)\",.*\\],\"summary\":\\{\"(heads|tails)\":[0-9]{1,3},\"(heads|tails)\":[0-9]{1,3}\\}\\}",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Header check &#47;app&#47;flip&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/flip/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*200\\s*(OK)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Header check &#47;app&#47;flips&#47;&#58;number&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; NUMBER=\"$(shuf -i 100-500 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/flips/${NUMBER}/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*200\\s*(OK)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Call a flip heads at endpoint &#47;app&#47;flip&#47;call&#47;heads&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl http://localhost:${PORT}/app/flip/call/heads/ && sleep 5s",
      "input": "",
      "output": "\\{\"call\":\"heads\",\"flip\":\"(heads|tails)\",\"result\":\"(win|lose)\"\\}",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Call a flip tails at endpoint &#47;app&#47;flip&#47;call&#47;tails&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl http://localhost:${PORT}/app/flip/call/tails/ && sleep 5s",
      "input": "",
      "output": "\\{\"call\":\"tails\",\"flip\":\"(heads|tails)\",\"result\":\"(win|lose)\"\\}",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Header check &#47;app&#47;flip&#47;call&#47;heads&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/flip/call/heads/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*200\\s*(OK)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Header check &#47;app&#47;flip&#47;call&#47;tails&#47;",
      "setup": "",
      "run": "PORT=\"$(shuf -i 2000-65535 -n 1)\"; (timeout --signal=SIGINT 5 node server.js --port=$PORT; exit 0) & sleep 1s && curl -I http://localhost:${PORT}/app/flip/call/tails/ && sleep 5s",
      "input": "",
      "output": "HTTP\\/(1.1|2)\\s*200\\s*(OK)?",
      "comparison": "regex",
      "timeout": 10,
      "points": 7500
    },
    {
      "name": "Node version",
      "setup": "",
      "run": "node -v",
      "input": "",
      "output": "",
      "comparison": "included",
      "timeout": 10,
      "points": null
    }
  ]
}